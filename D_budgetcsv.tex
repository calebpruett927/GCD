\chapter{Budget Report CSV Header Spec (+ sample rows)}
\label{apx:budgetcsv}

This appendix fixes the \emph{canonical} CSV headers for Budget Reports so audits are portable across tools. CSVs are UTF-8, comma-separated, period “.” as decimal point, no thousand separators.

\section{Canonical Headers}
\label{sec:csv-headers}


\noindent\textbf{Single-interval (minimal).}
\begin{lstlisting}[style=umcpstyle, numbers=none, frame=single, basicstyle=\ttfamily\small, columns=fullflexible]
deltaKappa,Domega,DC,RtauR,minIC,tauR,weld_id,manifest,residual
\end{lstlisting}

\medskip
\noindent\textbf{Two-stage (pre/post) or multi-slice.}
\begin{lstlisting}[style=umcpstyle, numbers=none, frame=single, basicstyle=\ttfamily\small, columns=fullflexible]
stage,deltaKappa,Domega,DC,RtauR,minIC,tauR,regime,weld_id,manifest,residual
\end{lstlisting}
\newpage
\section{Field Dictionary}
\label{sec:csv-dict}
\begin{table}[h]
  \centering
  \caption{CSV fields (short, machine-friendly).}
  \label{tab:csv-fields}
  \footnotesize
  \begingroup\setlength{\tabcolsep}{5pt}
  \begin{tabularx}{\linewidth}{@{} l c l l >{\raggedright\arraybackslash}X @{}}
    \toprule
    Field & Req. & Type & Unit/Range & Meaning \\
    \midrule
    \texttt{stage} & No  & string & — & label (e.g., \texttt{pre}, \texttt{post}) \\
    \texttt{deltaKappa} & Yes & number & \(\mathbb{R}\) & \(\Delta\kappa\) on the interval \\
    \texttt{Domega} & Yes & number & \(\mathbb{R}_{\ge0}\) & drift debit \(D_{\omega}\) \\
    \texttt{DC} & Yes & number & \(\mathbb{R}_{\ge0}\) & curvature debit \(D_{C}\) \\
    \texttt{RtauR} & Yes & number & \(\mathbb{R}_{\ge0}\) & return credit \(R\tau_{R}\) \\
    \texttt{minIC} & Yes & number & \((0,1]\) & minimum IC on the slice \\
    \texttt{tauR} & Yes & number & steps & return delay \(\tau_{R}\) (declare unit in caption) \\
    \texttt{regime} & No  & string & — & \texttt{Stable|Watch|Collapse} (+\texttt{Critical}) \\
    \texttt{weld\_id} & Yes & string & — & weld identifier \\
    \texttt{manifest} & Yes & string & SHA-256 & bundle hash (64 hex chars) \\
    \texttt{residual} & Yes & number & \(|\cdot|\le 10^{-12}\) & \(\Delta\kappa-[R\tau_R-(D_{\omega}+D_C)]\) \\
    \bottomrule
  \end{tabularx}
  \endgroup
\end{table}

\section{Validation Rules (must pass)}
\label{sec:csv-rules}

\begin{enumerate}[leftmargin=1.25em]
  \item Exact identity (within tolerance): \(\Delta\kappa = R\tau_{R} - (D_{\omega}+D_{C})\); \(|\texttt{residual}|\le 10^{-12}\).
  \item All numbers use “.” as decimal; no thousands separators; no units in cells.
  \item \texttt{manifest} is 64 hex chars; \texttt{weld\_id} is stable across related rows.
  \item If \texttt{stage} is present, audits share the same anchor and interval length.
\end{enumerate}

\section{Sample Rows (drop-in)}
\label{sec:csv-samples}

\noindent\textbf{Minimal (single row).}
\begin{lstlisting}[style=umcpstyle, numbers=none, frame=single, basicstyle=\ttfamily\small, columns=fullflexible]
deltaKappa,Domega,DC,RtauR,minIC,tauR,weld_id,manifest,residual
0.0060,0.0060,0.0060,0.0180,0.9600,1.2000,W-2025-09-23-CRYPTO-01,7247553fb9576436b097cc0f1e24f5194b816a516a349d3f49775007458cc84a,0.0000
\end{lstlisting}

\medskip
\noindent\textbf{Two-stage (pre/post weld).}
\begin{lstlisting}[style=umcpstyle, numbers=none, frame=single, basicstyle=\ttfamily\small, columns=fullflexible]
stage,deltaKappa,Domega,DC,RtauR,minIC,tauR,regime,weld_id,manifest,residual
pre,-0.0300,0.1200,0.0700,0.1600,0.6200,4.0000,Watch,W-2025-09-23-COG-01,7247553fb9576436b097cc0f1e24f5194b816a516a349d3f49775007458cc84a,0.0000
post,0.0100,0.0600,0.0400,0.1100,0.7800,2.5000,Stable,W-2025-09-23-COG-01,7247553fb9576436b097cc0f1e24f5194b816a516a349d3f49775007458cc84a,0.0000
\end{lstlisting}

\newpage
\noindent\textbf{Clause update (legal).}
\begin{lstlisting}[style=umcpstyle, numbers=none, frame=single, basicstyle=\ttfamily\small, columns=fullflexible]
stage,deltaKappa,Domega,DC,RtauR,minIC,tauR,regime,weld_id,manifest,residual
pre,-0.0120,0.0300,0.0220,0.0400,0.7400,5.0000,Watch,W-2025-09-23-LEGAL-01,7247553fb9576436b097cc0f1e24f5194b816a516a349d3f49775007458cc84a,0.0000
post,0.0150,0.0180,0.0170,0.0500,0.8800,3.0000,Stable,W-2025-09-23-LEGAL-01,7247553fb9576436b097cc0f1e24f5194b816a516a349d3f49775007458cc84a,0.0000
\end{lstlisting}

\medskip
\noindent\textbf{Physical instrumentation (PHYS-01).}
\begin{lstlisting}[style=umcpstyle, numbers=none, frame=single, basicstyle=\ttfamily\small, columns=fullflexible]
deltaKappa,Domega,DC,RtauR,minIC,tauR,weld_id,manifest,residual
-0.320247,0.100000,0.250247,0.030000,0.327910,2.500000,W-2025-09-23-PHYS-01,7247553fb9576436b097cc0f1e24f5194b816a516a349d3f49775007458cc84a,0.0000
\end{lstlisting}

\medskip
\noindent\textbf{Critical overlay (Collapse).}
\begin{lstlisting}[style=umcpstyle, numbers=none, frame=single, basicstyle=\ttfamily\small, columns=fullflexible]
stage,deltaKappa,Domega,DC,RtauR,minIC,tauR,regime,weld_id,manifest,residual
single,-0.080000,0.340000,0.120000,0.380000,0.180000,5.500000,Collapse+Critical,W-2025-09-23-critical-01,7247553fb9576436b097cc0f1e24f5194b816a516a349d3f49775007458cc84a,0.0000
\end{lstlisting}

\medskip
\noindent\textbf{Collapse $\rightarrow$ Stable recovery (two-stage).}
\begin{lstlisting}[style=umcpstyle, numbers=none, frame=single, basicstyle=\ttfamily\small, columns=fullflexible]
stage,deltaKappa,Domega,DC,RtauR,minIC,tauR,regime,weld_id,manifest,residual
pre,-0.040000,0.310000,0.090000,0.360000,0.220000,6.200000,Collapse+Critical,W-2025-09-23-recovery-01,7247553fb9576436b097cc0f1e24f5194b816a516a349d3f49775007458cc84a,0.0000
post,0.010000,0.070000,0.050000,0.130000,0.720000,2.800000,Stable,W-2025-09-23-recovery-01,7247553fb9576436b097cc0f1e24f5194b816a516a349d3f49775007458cc84a,0.0000
\end{lstlisting}

\medskip
\noindent\textbf{Stable $\rightarrow$ Watch regression (two-stage).}
\begin{lstlisting}[style=umcpstyle, numbers=none, frame=single, basicstyle=\ttfamily\small, columns=fullflexible]
stage,deltaKappa,Domega,DC,RtauR,minIC,tauR,regime,weld_id,manifest,residual
pre,0.005000,0.020000,0.015000,0.040000,0.980000,1.800000,Stable,W-2025-09-23-regression-01,7247553fb9576436b097cc0f1e24f5194b816a516a349d3f49775007458cc84a,0.0000
post,-0.012000,0.090000,0.050000,0.128000,0.620000,3.400000,Watch,W-2025-09-23-regression-01,7247553fb9576436b097cc0f1e24f5194b816a516a349d3f49775007458cc84a,0.0000
\end{lstlisting}


\section{Caption Reminder (one line)}
\label{sec:csv-caption}
Tie every CSV-derived table to a caption stating contract keys\\ 
\((a,b,\varepsilon,p,\alpha)=(-3.7280384,\,10.856631,\,10^{-8},\,3,\,1.0)\), face policy \texttt{post\_clip+guard}, residual, regime, \texttt{weld\_id}, and manifest.

